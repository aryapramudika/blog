[{"content":"Virtual IP is very important for accessing shared resource in a cluster.\nPacemaker will install a virtual IP to the node, and if the node dies, it will be installed to another available node.\nSetup Run in nodes1:\nWe will using pcs command-line utility to create virtual ip\npcs resource create virtual_ip ocfðŸ’“IPaddr2 ip=10.1.1.125 cidr_netmask=32 op monitor interval=30s Verify In Nodes1:\nip a Example output:\n2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether de:88:f7:1e:f4:16 brd ff:ff:ff:ff:ff:ff altname enp0s18 altname ens18 inet 10.1.1.123/24 brd 10.1.1.255 scope global noprefixroute eth0 valid_lft forever preferred_lft forever inet 10.1.1.125/32 brd 10.1.1.255 scope global eth0 valid_lft forever preferred_lft forever inet6 fe80::dc88:f7ff:fe1e:f416/64 scope link valid_lft forever preferred_lft forever the VIP is assigned to nodes1\nTest ping from node1\nping -c2 10.1.1.125 PING 10.1.1.125 (10.1.1.125) 56(84) bytes of data. 64 bytes from 10.1.1.125: icmp_seq=1 ttl=64 time=0.027 ms 64 bytes from 10.1.1.125: icmp_seq=2 ttl=64 time=0.025 ms Test ping from node2\nping -c2 10.1.1.125 PING 10.1.1.125 (10.1.1.125) 56(84) bytes of data. 64 bytes from 10.1.1.125: icmp_seq=1 ttl=64 time=0.027 ms 64 bytes from 10.1.1.125: icmp_seq=2 ttl=64 time=0.025 ms Before this action, you must run ping to 10.1.1.125(VIP on other machine) to get realtime connection(Requst timeout or not)\nIn Nodes1 who have VIP, disable interface(using console/or other if u have 1 NIC the ssh session is disconnect):\nip link set eth0 down Check in node2:\n[root@pace2 ~]# ip a | grep eth0 2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000 inet 10.1.1.124/24 brd 10.1.1.255 scope global noprefixroute eth0 inet 10.1.1.125/32 brd 10.1.1.255 scope global eth0 VIP moved to nodes2\nDone, you have successfully created a vip for pacemaker cluster.\nSee you in next tutorial about pacemaker.\n","permalink":"https://aryapramudika.com/blog/pacemaker/vip/","summary":"Virtual IP is very important for accessing shared resource in a cluster.\nPacemaker will install a virtual IP to the node, and if the node dies, it will be installed to another available node.\nSetup Run in nodes1:\nWe will using pcs command-line utility to create virtual ip\npcs resource create virtual_ip ocfðŸ’“IPaddr2 ip=10.1.1.125 cidr_netmask=32 op monitor interval=30s Verify In Nodes1:\nip a Example output:\n2: eth0: \u0026lt;BROADCAST,MULTICAST,UP,LOWER_UP\u0026gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether de:88:f7:1e:f4:16 brd ff:ff:ff:ff:ff:ff altname enp0s18 altname ens18 inet 10.","title":"Setup Virtual IP in Pacemaker Cluster"}]